"use strict";(self.webpackChunkdocs_technician_upp=self.webpackChunkdocs_technician_upp||[]).push([[926],{9613:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var r=a(9496);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var u=r.createContext({}),p=function(e){var t=r.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=p(e.components);return r.createElement(u.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,u=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(a),m=n,g=d["".concat(u,".").concat(m)]||d[m]||l[m]||o;return a?r.createElement(g,s(s({ref:t},c),{},{components:a})):r.createElement(g,s({ref:t},c))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,s=new Array(o);s[0]=d;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var p=2;p<o;p++)s[p]=a[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},7719:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>l,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var r=a(4250),n=(a(9496),a(9613));const o={sidebar_position:5},s="API Key",i={unversionedId:"project-structure/apikey",id:"project-structure/apikey",title:"API Key",description:"\xbfPara qu\xe9 proteger nuestras rutas?",source:"@site/backend/project-structure/5-apikey.md",sourceDirName:"project-structure",slug:"/project-structure/apikey",permalink:"/docs-technician-upp/docs/project-structure/apikey",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/backend/project-structure/5-apikey.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Models",permalink:"/docs-technician-upp/docs/project-structure/models"},next:{title:"Routes",permalink:"/docs-technician-upp/docs/project-structure/routes"}},u={},p=[{value:"Tipos de Usuario",id:"tipos-de-usuario",level:2},{value:"SuperAdmin",id:"superadmin",level:3},{value:"Moder",id:"moder",level:3},{value:"Client",id:"client",level:3},{value:"\xbfC\xf3mo generar un API KEY?",id:"c\xf3mo-generar-un-api-key",level:2},{value:"\xbfC\xf3mo usar el API KEY?",id:"c\xf3mo-usar-el-api-key",level:2}],c={toc:p};function l(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,r.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"api-key"},"API Key"),(0,n.kt)("p",null,"\xbfPara qu\xe9 proteger nuestras ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"rutas")),"?"),(0,n.kt)("p",null,"Antes de empezar a ver el ",(0,n.kt)("strong",{parentName:"p"},"router")," de nuestra aplicaci\xf3n es necesario que conozcas acerca de la protecci\xf3n de las mismas que se da en conjunto con un ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"API KEY ")),"esto lo hacemos con la intenci\xf3n de que ",(0,n.kt)("strong",{parentName:"p"},"NO")," todo tipo de usuario tenga acceso a todas las rutas dentro de nuestra ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"API"))," y que no hagan mal uso de la informaci\xf3n aqu\xed presentada, para ello veremos los tipos de usuarios que tenemos."),(0,n.kt)("h2",{id:"tipos-de-usuario"},"Tipos de Usuario"),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Los emails de los usuarios estar\xe1n registrados bajo el dominio de la UPP para poder tener acceso.")),(0,n.kt)("h3",{id:"superadmin"},"SuperAdmin"),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"Recomiendo que nos hagan muchos registros de super admins, para un mayor control. ")),(0,n.kt)("p",null,"Este tipo de usuario tiene acceso a todo, ya que ser\xe1 el encargado de administrar, toda las tablas cat\xe1logos de este departamento"),(0,n.kt)("h3",{id:"moder"},"Moder"),(0,n.kt)("p",null,"Este ser\xe1n los usuarios del departamento de compras, por lo que tienen un acceso un poco menor a el superadmin, estos solo se encargaran de revisar, administrar y enviar las requisiciones de los clientes."),(0,n.kt)("h3",{id:"client"},"Client"),(0,n.kt)("p",null,"Estos son los usuarios registrados como clientes, son los que tienen el acceso m\xe1s bajo y que solo se encargan de visualizar sus peticiones, en dado caso de que as\xed lo desean, tambi\xe9n dentro de este tipo de usuario recaen los proveedores, los cuales son los que pueden vender productos a la Universidad."),(0,n.kt)("h2",{id:"c\xf3mo-generar-un-api-key"},"\xbfC\xf3mo generar un API KEY?"),(0,n.kt)("p",null,"Una vez agregado nuestro usuario con su respectivo ",(0,n.kt)("strong",{parentName:"p"},"rol "),"en la ruta ",(0,n.kt)("inlineCode",{parentName:"p"},"POST")," de usuarios, podremos conseguir nuestro token en ",(0,n.kt)("inlineCode",{parentName:"p"},"usuario/login")," (",(0,n.kt)("inlineCode",{parentName:"p"},"POST"),") en caso de una respuesta de \xe9xito por parte de esta ruta obtendremos una salida como la siguiente:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "idRol": 0,\n  "token": "token access"\n}\n')),(0,n.kt)("p",null,"Y de aqu\xed podremos obtener nuestro token de acceso para su posterior uso."),(0,n.kt)("h2",{id:"c\xf3mo-usar-el-api-key"},"\xbfC\xf3mo usar el API KEY?"),(0,n.kt)("p",null,"Una vez generado nuestro ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"API KEY"))," hay dos formas de usarlo, la cual es ya directamente en alg\xfan cliente de nuestra ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"API")),", para ello consulta sus secci\xf3n en el ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"Frontend")),"."),(0,n.kt)("p",null,"Pero en esta parte la docs de ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"FastAPI "))," nos genera un formulario para a\xf1adir nuestra API KEY y se pueda usarse de manera autom\xe1tica en las rutas protegidas por esta ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"API KEY. ")),"Como vemos en la siguiente imagen: "),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"login1",src:a(5716).Z,width:"2032",height:"1167"}),"\n",(0,n.kt)("img",{alt:"login2",src:a(1378).Z,width:"2032",height:"1167"}),"\n",(0,n.kt)("img",{alt:"login3",src:a(9104).Z,width:"2032",height:"1167"})),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Una vez agregado nuestra ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"API KEY "))," veremos el candado cerrado esto quiere decir que la API KEY se agreg\xf3 de manera correcta y estar\xe1 lista para enviarse en las rutas en las que sea necesaria.\n",(0,n.kt)("img",{alt:"login4",src:a(5115).Z,width:"2032",height:"1167"}))),(0,n.kt)("p",null,"Ya agregada la API KEY esta se usar\xe1 en las rutas necesarias y devolver\xe1 o no  una respuesta dependiendo del nivel de acceso del token de usuario generado."))}l.isMDXComponent=!0},5716:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/1-login-4d3120dfd089c0d8b0709eae493747f8.png"},1378:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/2-login-b7ae5b95880562ed4deef8a806a6b2ab.png"},9104:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/3-login-d58eb45216c1ec84761b5a88589e8483.png"},5115:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/4-login-902d5df6b379f894861442016fb62942.png"}}]);